-- *********************************************************************
-- Update Database Script
-- *********************************************************************
-- Change Log: changelog.groovy
-- Ran at: 12/21/12 4:24 PM

-- Liquibase version: 2.0.1
-- *********************************************************************

-- Create Database Lock Table
CREATE TABLE DATABASECHANGELOGLOCK (ID INTEGER NOT NULL, LOCKED NUMBER(1) NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR2(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID));

INSERT INTO DATABASECHANGELOGLOCK (ID, LOCKED) VALUES (1, 0);

-- Lock Database
-- Create Database Change Log Table
CREATE TABLE DATABASECHANGELOG (ID VARCHAR2(63) NOT NULL, AUTHOR VARCHAR2(63) NOT NULL, FILENAME VARCHAR2(200) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INTEGER NOT NULL, EXECTYPE VARCHAR2(10) NOT NULL, MD5SUM VARCHAR2(35), DESCRIPTION VARCHAR2(255), COMMENTS VARCHAR2(255), TAG VARCHAR2(255), LIQUIBASE VARCHAR2(20), CONSTRAINT PK_DATABASECHANGELOG PRIMARY KEY (ID, AUTHOR, FILENAME));

-- Changeset changelog_5.0.0.groovy::5.0.0-1::metric::(Checksum: 3:d0ed4813812e9adb341ba2d8e50427da)
-- Creating metric table
CREATE TABLE metric (id NUMBER(38,0) NOT NULL, version NUMBER(38,0) NOT NULL, component VARCHAR2(200) NOT NULL, component_id VARCHAR2(255) NOT NULL, instance_id VARCHAR2(255) NOT NULL, metric_time VARCHAR2(255) NOT NULL, metric_type_id VARCHAR2(255) NOT NULL, site VARCHAR2(255) NOT NULL, user_agent VARCHAR2(255) NOT NULL, user_id VARCHAR2(255) NOT NULL, user_name VARCHAR2(255) NOT NULL, widget_data VARCHAR2(255), CONSTRAINT metricPK PRIMARY KEY (id));

INSERT INTO DATABASECHANGELOG (AUTHOR, COMMENTS, DATEEXECUTED, DESCRIPTION, EXECTYPE, FILENAME, ID, LIQUIBASE, MD5SUM, ORDEREXECUTED) VALUES ('metric', 'Creating metric table', SYSTIMESTAMP, 'Create Table', 'EXECUTED', 'changelog_5.0.0.groovy', '5.0.0-1', '2.0.1', '3:d0ed4813812e9adb341ba2d8e50427da', 1);

-- Changeset changelog_5.0.0.groovy::5.0.0-2::metric::(Checksum: 3:fc5ad69bb5039167b4172b1dc69e9fc3)
CREATE TABLE owf_group (id NUMBER(38,0) NOT NULL, version NUMBER(38,0) NOT NULL, automatic NUMBER(1) NOT NULL, description VARCHAR2(255), email VARCHAR2(255), name VARCHAR2(200) NOT NULL, status VARCHAR2(8) NOT NULL, CONSTRAINT owf_groupPK PRIMARY KEY (id));

INSERT INTO DATABASECHANGELOG (AUTHOR, COMMENTS, DATEEXECUTED, DESCRIPTION, EXECTYPE, FILENAME, ID, LIQUIBASE, MD5SUM, ORDEREXECUTED) VALUES ('metric', '', SYSTIMESTAMP, 'Create Table', 'EXECUTED', 'changelog_5.0.0.groovy', '5.0.0-2', '2.0.1', '3:fc5ad69bb5039167b4172b1dc69e9fc3', 2);

-- Changeset changelog_5.0.0.groovy::5.0.0-3::metric::(Checksum: 3:776f3e5531c86c55dd34757827469ecf)
CREATE TABLE owf_group_people (group_id NUMBER(38,0) NOT NULL, person_id NUMBER(38,0) NOT NULL);

INSERT INTO DATABASECHANGELOG (AUTHOR, COMMENTS, DATEEXECUTED, DESCRIPTION, EXECTYPE, FILENAME, ID, LIQUIBASE, MD5SUM, ORDEREXECUTED) VALUES ('metric', '', SYSTIMESTAMP, 'Create Table', 'EXECUTED', 'changelog_5.0.0.groovy', '5.0.0-3', '2.0.1', '3:776f3e5531c86c55dd34757827469ecf', 3);

-- Changeset changelog_5.0.0.groovy::5.0.0-4::metric::(Checksum: 3:2c576dc94d7a28be9508a8ed6ff861ac)
CREATE TABLE person (id NUMBER(38,0) NOT NULL, version NUMBER(38,0) NOT NULL, description VARCHAR2(255), email VARCHAR2(255), email_show NUMBER(1) NOT NULL, enabled NUMBER(1) NOT NULL, last_login TIMESTAMP, prev_login TIMESTAMP, user_real_name VARCHAR2(200) NOT NULL, username VARCHAR2(200) NOT NULL, CONSTRAINT personPK PRIMARY KEY (id), UNIQUE (username));

INSERT INTO DATABASECHANGELOG (AUTHOR, COMMENTS, DATEEXECUTED, DESCRIPTION, EXECTYPE, FILENAME, ID, LIQUIBASE, MD5SUM, ORDEREXECUTED) VALUES ('metric', '', SYSTIMESTAMP, 'Create Table', 'EXECUTED', 'changelog_5.0.0.groovy', '5.0.0-4', '2.0.1', '3:2c576dc94d7a28be9508a8ed6ff861ac', 4);

-- Changeset changelog_5.0.0.groovy::5.0.0-5::metric::(Checksum: 3:8e1b2277e0aa08f40ef04493d798b010)
CREATE TABLE role (id NUMBER(38,0) NOT NULL, version NUMBER(38,0) NOT NULL, authority VARCHAR2(255) NOT NULL, description VARCHAR2(255) NOT NULL, CONSTRAINT rolePK PRIMARY KEY (id), UNIQUE (authority));

INSERT INTO DATABASECHANGELOG (AUTHOR, COMMENTS, DATEEXECUTED, DESCRIPTION, EXECTYPE, FILENAME, ID, LIQUIBASE, MD5SUM, ORDEREXECUTED) VALUES ('metric', '', SYSTIMESTAMP, 'Create Table', 'EXECUTED', 'changelog_5.0.0.groovy', '5.0.0-5', '2.0.1', '3:8e1b2277e0aa08f40ef04493d798b010', 5);

-- Changeset changelog_5.0.0.groovy::5.0.0-6::metric::(Checksum: 3:e33bfaaeab763096aa90a8483a2e2127)
CREATE TABLE role_people (role_id NUMBER(38,0) NOT NULL, person_id NUMBER(38,0) NOT NULL);

INSERT INTO DATABASECHANGELOG (AUTHOR, COMMENTS, DATEEXECUTED, DESCRIPTION, EXECTYPE, FILENAME, ID, LIQUIBASE, MD5SUM, ORDEREXECUTED) VALUES ('metric', '', SYSTIMESTAMP, 'Create Table', 'EXECUTED', 'changelog_5.0.0.groovy', '5.0.0-6', '2.0.1', '3:e33bfaaeab763096aa90a8483a2e2127', 6);

-- Changeset changelog_5.0.0.groovy::5.0.0-7::metric::(Checksum: 3:80e84375f463faef757e5184c1a8c11d)
ALTER TABLE owf_group_people ADD PRIMARY KEY (group_id, person_id);

INSERT INTO DATABASECHANGELOG (AUTHOR, COMMENTS, DATEEXECUTED, DESCRIPTION, EXECTYPE, FILENAME, ID, LIQUIBASE, MD5SUM, ORDEREXECUTED) VALUES ('metric', '', SYSTIMESTAMP, 'Add Primary Key', 'EXECUTED', 'changelog_5.0.0.groovy', '5.0.0-7', '2.0.1', '3:80e84375f463faef757e5184c1a8c11d', 7);

-- Changeset changelog_5.0.0.groovy::5.0.0-8::metric::(Checksum: 3:d5d8393560daec118b4ec2ee8fa2c369)
ALTER TABLE role_people ADD PRIMARY KEY (role_id, person_id);

INSERT INTO DATABASECHANGELOG (AUTHOR, COMMENTS, DATEEXECUTED, DESCRIPTION, EXECTYPE, FILENAME, ID, LIQUIBASE, MD5SUM, ORDEREXECUTED) VALUES ('metric', '', SYSTIMESTAMP, 'Add Primary Key', 'EXECUTED', 'changelog_5.0.0.groovy', '5.0.0-8', '2.0.1', '3:d5d8393560daec118b4ec2ee8fa2c369', 8);

-- Changeset changelog_5.0.0.groovy::5.0.0-11::metric::(Checksum: 3:4d31aea5bd1733c9e178001830e77e67)
ALTER TABLE owf_group_people ADD CONSTRAINT FK28113703B197B21 FOREIGN KEY (group_id) REFERENCES owf_group (id);

INSERT INTO DATABASECHANGELOG (AUTHOR, COMMENTS, DATEEXECUTED, DESCRIPTION, EXECTYPE, FILENAME, ID, LIQUIBASE, MD5SUM, ORDEREXECUTED) VALUES ('metric', '', SYSTIMESTAMP, 'Add Foreign Key Constraint', 'EXECUTED', 'changelog_5.0.0.groovy', '5.0.0-11', '2.0.1', '3:4d31aea5bd1733c9e178001830e77e67', 9);

-- Changeset changelog_5.0.0.groovy::5.0.0-12::metric::(Checksum: 3:d67714cb20092581a9533ccf13321f44)
ALTER TABLE owf_group_people ADD CONSTRAINT FK2811370C1F5E0B3 FOREIGN KEY (person_id) REFERENCES person (id);

INSERT INTO DATABASECHANGELOG (AUTHOR, COMMENTS, DATEEXECUTED, DESCRIPTION, EXECTYPE, FILENAME, ID, LIQUIBASE, MD5SUM, ORDEREXECUTED) VALUES ('metric', '', SYSTIMESTAMP, 'Add Foreign Key Constraint', 'EXECUTED', 'changelog_5.0.0.groovy', '5.0.0-12', '2.0.1', '3:d67714cb20092581a9533ccf13321f44', 10);

-- Changeset changelog_5.0.0.groovy::5.0.0-13::metric::(Checksum: 3:8dd1b72247c987acb86dd51984dd500d)
ALTER TABLE role_people ADD CONSTRAINT FK28B75E78C1F5E0B3 FOREIGN KEY (person_id) REFERENCES person (id);

INSERT INTO DATABASECHANGELOG (AUTHOR, COMMENTS, DATEEXECUTED, DESCRIPTION, EXECTYPE, FILENAME, ID, LIQUIBASE, MD5SUM, ORDEREXECUTED) VALUES ('metric', '', SYSTIMESTAMP, 'Add Foreign Key Constraint', 'EXECUTED', 'changelog_5.0.0.groovy', '5.0.0-13', '2.0.1', '3:8dd1b72247c987acb86dd51984dd500d', 11);

-- Changeset changelog_5.0.0.groovy::5.0.0-14::metric::(Checksum: 3:dc986d30fe40d96c2e4c1d479a1b9d20)
ALTER TABLE role_people ADD CONSTRAINT FK28B75E7870B353 FOREIGN KEY (role_id) REFERENCES role (id);

INSERT INTO DATABASECHANGELOG (AUTHOR, COMMENTS, DATEEXECUTED, DESCRIPTION, EXECTYPE, FILENAME, ID, LIQUIBASE, MD5SUM, ORDEREXECUTED) VALUES ('metric', '', SYSTIMESTAMP, 'Add Foreign Key Constraint', 'EXECUTED', 'changelog_5.0.0.groovy', '5.0.0-14', '2.0.1', '3:dc986d30fe40d96c2e4c1d479a1b9d20', 12);

-- Changeset changelog_5.0.0.groovy::5.0.0-15::metric::(Checksum: 3:1f8c97c0685b3c4f68b4ac2954ed9919)
CREATE SEQUENCE hibernate_sequence;

INSERT INTO DATABASECHANGELOG (AUTHOR, COMMENTS, DATEEXECUTED, DESCRIPTION, EXECTYPE, FILENAME, ID, LIQUIBASE, MD5SUM, ORDEREXECUTED) VALUES ('metric', '', SYSTIMESTAMP, 'Create Sequence', 'EXECUTED', 'changelog_5.0.0.groovy', '5.0.0-15', '2.0.1', '3:1f8c97c0685b3c4f68b4ac2954ed9919', 13);

